<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Get started with MapView - Create a 2D map</title>
    <style>
        html, body, #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
    <script src="../../js/jQuery-3.2.1.js"></script>
    <link rel="stylesheet" href="../../css/bootstrap.min.css">
    <script src="../../js/bootstrap.js"></script>
    <link rel="stylesheet" href="../../css/main.css">
    <script src="../../js/sdk/arcgis4.3.js"></script>

    <script>
        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/FeatureLayer",
            "esri/widgets/Search",
            "dojo/domReady!"
        ], function (Map, MapView, FeatureLayer, Search) {
            var map = new Map({
                basemap: "streets"
            });
            var view = new MapView({
                container: "viewDiv",  // Reference to the scene div created in step 5
                map: map,  // Reference to the map object created before the scene
                zoom: 11,  // Sets the zoom level based on level of detail (LOD)
                center: [121.48, 31.23]  // Sets the center point of view in lon/lat
            });

            var featureLayer = new FeatureLayer({

                //    url: "	https://localhost:6443/arcgis/rest/services/Shanghai/test/MapServer"
                url: "http://localhost:6080/arcgis/rest/services/35min/MapServer"
            });

            map.add(featureLayer);


        });
    </script>
</head>
<body>

<div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="true">
        时间
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
        <li onClick="changeMap('35min')"><a>35min</a></li>
        <li onClick="changeMap('45min')"><a href="#">45min</a></li>
        <li onClick="changeMap('55min')"><a href="#">55min</a></li>
    </ul>
</div>

<div id="viewDiv"></div>
</body>

<script>

    function changeMap(time) {
        if (time == "35min") {
            require([
                "esri/Map",
                "esri/views/MapView",
                "esri/layers/FeatureLayer",
                "esri/widgets/Search",
                "dojo/domReady!"
            ], function (Map, MapView, FeatureLayer, Search) {
                var map = new Map({
                    basemap: "streets"
                });
                var view = new MapView({
                    container: "viewDiv",  // Reference to the scene div created in step 5
                    map: map,  // Reference to the map object created before the scene
                    zoom: 11,  // Sets the zoom level based on level of detail (LOD)
                    center: [121.48, 31.23]  // Sets the center point of view in lon/lat
                });

                var featureLayer = new FeatureLayer({

                    //    url: "	https://localhost:6443/arcgis/rest/services/Shanghai/test/MapServer"
                    url: "http://localhost:6080/arcgis/rest/services/35min/MapServer"
                });

                map.add(featureLayer);


            });
        }
        else if (time == "45min") {
            require([
                "esri/Map",
                "esri/views/MapView",
                "esri/layers/FeatureLayer",
                "esri/widgets/Search",
                "dojo/domReady!"
            ], function (Map, MapView, FeatureLayer, Search) {
                var map = new Map({
                    basemap: "streets"
                });
                var view = new MapView({
                    container: "viewDiv",  // Reference to the scene div created in step 5
                    map: map,  // Reference to the map object created before the scene
                    zoom: 11,  // Sets the zoom level based on level of detail (LOD)
                    center: [121.48, 31.23]  // Sets the center point of view in lon/lat
                });

                var featureLayer = new FeatureLayer({

                    //    url: "	https://localhost:6443/arcgis/rest/services/Shanghai/test/MapServer"
                    url: "http://localhost:6080/arcgis/rest/services/45min/MapServer"
                });

                map.add(featureLayer);


            });
        }
        else if (time == "55min") {
            require([
                "esri/Map",
                "esri/views/MapView",
                "esri/layers/FeatureLayer",
                "esri/widgets/Search",
                "dojo/domReady!"
            ], function (Map, MapView, FeatureLayer, Search) {
                var map = new Map({
                    basemap: "streets"
                });
                var view = new MapView({
                    container: "viewDiv",  // Reference to the scene div created in step 5
                    map: map,  // Reference to the map object created before the scene
                    zoom: 11,  // Sets the zoom level based on level of detail (LOD)
                    center: [121.48, 31.23]  // Sets the center point of view in lon/lat
                });

                var featureLayer = new FeatureLayer({

                    //    url: "	https://localhost:6443/arcgis/rest/services/Shanghai/test/MapServer"
                    url: "http://localhost:6080/arcgis/rest/services/55min/MapServer"
                });

                map.add(featureLayer);


            });
        }
    }
</script>
</html>